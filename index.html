<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="cover.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <title>Home</title>
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="index.html">TimeSlice</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#myNavbar" aria-controls="myNavbar" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html"><strong>Home</strong></a></li>
          <!-- <li class="nav-item"><a class="nav-link" href="setup.html"><strong>Get Started</strong></a></li> -->
          <li class="nav-item"><a class="nav-link" href="writeup.html"><strong>The Writeup</strong></a></li>
          <!-- <li class="nav-item"><a class="nav-link" href="code.html"><strong>The Code</strong></a></li> -->
        </ul>
      </div>
    </div>
  </nav>

    <div class="container-fluid text-center">
      <img src="images/TimeSlice_lesser.png" class="img-responsive mb-5" style="display:inline, width= 40%;" alt="TimeSlice logo and tagline">
    </div>

    <div class="container-fluid text-center">
      <!-- <h3 class=" ">Personalize your session.</h3> -->
      <h5 class=" ">Click on an image below to choose your experience.</h5>
      <!-- <p class="mb-5">Background image, sound, and time intervals are up to you.</p> -->

      <!-- <button class="mb-5" href="setup.html" type="button" onclick="location.href='setup.html'">
        Get Started
      </button> -->
    </div>

    <div class="container-fluid bg-3 text-center mb-5">
      <form>
        <div class="row">
          <!-- ROWBOAT -->
          <div class="col-sm-4">
            <label class="text-center w-100" style="cursor:pointer;">
              <input type="radio" name="theme" id="rowboatLake" value="rowboatLake" class="d-none">
              <img src="/images/rowboatLake.png" class="img-responsive mb-2" style="width:100%; border-radius:8px; border:2px solid #ccc;" alt="Lake">
              <div>Waves gently lapping at the lakeshore</div>
              <!-- <audio controls style="width:100px;">
                <source src="sound1.mp3" type="audio/mpeg">
              </audio> -->
            </label>
          </div>
          <!-- STONE CIRCLE -->
          <div class="col-sm-4">
            <label class="text-center w-100" style="cursor:pointer;">
              <input type="radio" name="theme" id="stoneCircle" value="stoneCircle" class="d-none">
              <img src="/images/stoneCircle.png" class="img-responsive mb-2" style="width:100%; border-radius:8px; border:2px solid #ccc;" alt="Stone Circle">
              <div>Nature sounds</div>
              <!-- <audio controls style="width:100px;">
                <source src="sound2.mp3" type="audio/mpeg">
              </audio> -->
            </label>
          </div>
          <!-- SHORELINE -->
          <div class="col-sm-4">
            <label class="text-center w-100" style="cursor:pointer;">
              <input type="radio" name="theme" id="rockyShore" value="rockyShore" class="d-none">
              <img src="/images/rockyShore.png" class="img-responsive mb-2" style="width:100%; border-radius:8px; border:2px solid #ccc;" alt="Rocky Shore">
              <div>Small ocean waves breaking on rocky shore</div>
              <!-- <audio controls style="width:100px;">
                <source src="sound3.mp3" type="audio/mpeg">
              </audio> -->
            </label>
          </div>
        </div>
      </form>
    </div>

  <!-- Footer -->
  <footer class="container-fluid footer bg-light text-center">
    <p>Bootstrap Theme By <a href="https://www.w3schools.com">www.w3schools.com</a>, Customized by Beth Olmo, M.S.</p>
  </footer>
  
  <!-- Timer Modal -->
  <div class="modal fade" id="timerModal" tabindex="-1" aria-labelledby="timerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content" style="background-size:cover; background-position:center;" id="modalBg">
        <div class="modal-header border-0">
          <!-- <h5 class="modal-title" id="timerModalLabel">Your Pomodoro Session</h5> -->
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center text-light">
          <!-- <img id="modalImage" src="" alt="" style="max-width:300px; border-radius:12px; margin-bottom:20px;"> -->
          <h2 id="timerDisplay" style="font-size:4rem; margin:20px 0;">25:00</h2>
          <audio id="modalAudio" controls style="width:200px; margin-bottom:20px;">
            <source id="audioSource" src="" type="">
          </audio>
          <div>
            <button id="startBtn" class="btn btn-success btn-lg">Start</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
const themes = {
  rowboatLake: {
    img: "/images/rowboatLake2.png",
    sound: "/soundscapes/rowboatLake.mp3"
  },
  stoneCircle: {
    img: "/images/stoneCircle.png",
    sound: "/soundscapes/stoneCircle.wav"
  },
  rockyShore: {
    img: "/images/rockyShore.png",
    sound: "/soundscapes/rockyShore.mp3"
  }
};

document.querySelectorAll('input[name="theme"]').forEach(input => {
  input.addEventListener('change', function() {
    const selected = themes[this.value];
    // Set modal background and content
    document.getElementById('modalBg').style.backgroundImage = `url('${selected.img}')`;
    // document.getElementById('modalImage').src = selected.img;
    document.getElementById('audioSource').src = selected.sound;
    document.getElementById('modalAudio').load();
    document.getElementById('timerDisplay').textContent = "25:00";
    // Show modal
    const modal = new bootstrap.Modal(document.getElementById('timerModal'));
    modal.show();
  });
});

// Simple Pomodoro timer logic
let timerInterval;
let timerRunning = false;

const startBtn = document.getElementById('startBtn');

startBtn.addEventListener('click', function() {
  if (!timerRunning) {
    // Start timer
    let minutes = 25, seconds = 0;
    document.getElementById('timerDisplay').textContent = "25:00";
    clearInterval(timerInterval);

    // Start audio playback and loop
    const audio = document.getElementById('modalAudio');
    const source = document.getElementById('audioSource');
    source.src = themes[document.querySelector('input[name="theme"]:checked').value].sound;
    audio.load();
    audio.loop = true;
    audio.currentTime = 0;
    audio.play();

    // Change button to Stop
    startBtn.textContent = "Stop";
    timerRunning = true;

    timerInterval = setInterval(() => {
      if (minutes === 0 && seconds === 0) {
        // Switch to break
        minutes = 5; seconds = 0;
        document.getElementById('timerDisplay').textContent = "05:00";
        clearInterval(timerInterval);
        audio.loop = false;
        audio.pause();
        startBtn.textContent = "Start";
        timerRunning = false;
        return;
      }
      if (seconds === 0) {
        minutes--; seconds = 59;
      } else {
        seconds--;
      }
      document.getElementById('timerDisplay').textContent =
        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }, 1000);
  } else {
    // Stop timer and audio
    clearInterval(timerInterval);
    document.getElementById('modalAudio').pause();
    document.getElementById('modalAudio').loop = false;
    startBtn.textContent = "Start";
    timerRunning = false;
  }
});
</script>
  
</body>
</html>